{% import 'macros/cards.html' as cards with context %}


<!-- CACHE RENDER CARD FUNCTIONS -->
{%
  set card_renders = dict([('project-big',cards.render_big_project_card)])
%}
<!-- /RENDER CARD FUNCTIONS -->


<!-- MACROS FOR RENDERING CAROUSELS -->

<!-- project carousel -->
{% macro render_project_carousel(label, id_postfix, card_type, data) -%}
  <!-- cache ids -->
  {% set carousel_id = 'carousel-{id_postfix}'.format(id_postfix=id_postfix) %}

  <!-- carousel header -->
  <h4 style='text-align:left;'>{{ label }}</h4>
  <hr class='my-2'>
  <!-- RENDER CAROUSEL -->
  <!-- web -->
  {% if not request.MOBILE %}
    <div id='{{ carousel_id }}' class='carousel slide carousel-multi-item' data-ride='carousel'>
      <div class='carousel-inner' role='listbox'>
        {% for tab in data %}
          <div class='carousel-item {% if loop.index==1 %}active{% endif %}'>
            {% for elt in tab %}
              <div class='row'>
                {{card_renders[card_type](elt) }}
              </div>
            {% endfor %}
          </div>
        {% endfor %}
      </div>
    </div>
  <!-- mobile -->
  {% else %}
    mobile
  {% endif %}
  <!-- /RENDER CAROUSEL -->

{% endmacro -%}
<!-- /project carousel -->
