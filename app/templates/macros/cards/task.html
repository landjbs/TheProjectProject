{% macro render_todo_task(task) -%}
<div class="list-group-item list-group-item-action flex-column align-items-start">
  <h6 class="mb-1">{{ task.text }}</h6>
  <div class="d-flex w-100 justify-content-between">
    <small>
      Requested by
      <a href='user={{ task.author.code }}' class="mb-1">
        {% if task.author %}
          <u>{{ task.author.name }}</u>
        {% else %}
          Anonymous
        {% endif %}
      </a>
      on {{ time_to_str(task.post_stamp) }}
    </small>
  </div>
  <!-- action bar -->
  {% if task.project.is_member(g.current_user) %}
    <div class='action-bar'>
      {% if g.current_user==task.author %}
        <div class='hoverable'>
          <a class='delete-btn task-btn float-left' href="{{ url_for('project.change_task_status', project_id=task.project.id, task_id=task.id, action='delete') }}">
            <i class="fa fa-times-circle" aria-hidden="true"></i>
          </a>
          <span class='tooltiptext'>Delete Task</span>
        </div>
      {% endif %}
      <a class='complete-btn task-btn float-right' href="{{ url_for('project.change_task_status', project_id=task.project.id, task_id=task.id, action='complete') }}">
        <i class="fa fa-check-circle" aria-hidden="true"></i>
      </a>
    </div>
  {% endif %}
</div>
{% endmacro -%}


{% macro render_complete_task(task) -%}
<div class="list-group-item list-group-item-action flex-column align-items-start">
  <h6 class="mb-1">{{ task.text }}</h6>
  <div class="d-flex w-100 justify-content-between">
    <small>
      Requested by
      <a href='user={{ task.author.code }}' class="mb-1">
        {% if task.author %}
          <u>{{ task.author.name }}</u>
        {% else %}
          Anonymous
        {% endif %}
      </a>
      on {{ time_to_str(task.post_stamp) }}
    </small>
  </div>
  <!-- action bar -->
  {% if task.project.is_member(g.current_user) %}
    <div class='action-bar'>
      {% if g.current_user==task.author %}
        <div class='hoverable'>
          <a class='delete-btn task-btn float-left' href="{{ url_for('project.change_task_status', project_id=task.project.id, task_id=task.id, action='delete') }}">
            <i class="fa fa-times-circle" aria-hidden="true"></i>
          </a>
          <span class='tooltiptext'>Delete Task</span>
        </div>
      {% endif %}
      <a class='complete-btn task-btn float-right' href="{{ url_for('project.change_task_status', project_id=task.project.id, task_id=task.id, action='complete') }}">
        <i class="fa fa-check-circle" aria-hidden="true"></i>
      </a>
    </div>
  {% endif %}
</div>
{% endmacro -%}
