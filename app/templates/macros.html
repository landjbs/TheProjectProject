<!-- project card to be shown to anonymous users -->
{% macro render_anon_project_card(project) -%}
<div class="col-md-4">
  <div class="card mb-2">
    <div class="card-body">
      <p class="float-right info-nums">
        {{ project.members.all()|length  }}
        <i class='far fa-user-circle'></i>
        <br>
        {{ project.stars.all()|length }}
        <i class="fa fa-star"></i>
      </p>
      <div class='card-head little'>
        {{ render_project_name(project, g.current_user) }}
        <p class='oneliner'>
          {{ project.oneliner }}
        </p>
      </div>
      <div class='card-foot float-left'>
        <div>
          {% for subject in project.subjects|reverse %}
            <a href='/subject={{ subject.code }}'>
              {% if loop.index>1 %}
              ,
              {% endif %}
              <p class='subject-tag' style='background:{{ subject.color }};'>
                {{ subject.name }}
              </p>
            </a>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endmacro -%}


<!-- subject cards -->


{% macro render_user_subject(user_subject) -%}
{% set subject = user_subject.subject %}
<div class="col-md-4">
  <a class='project-name' href='subject={{ subject.code }}'>
    <div class="card mb-2">
      <div class="card-body"
      style='background: {{ subject.color }}'>
        <p class="float-right" style='color:white;'>
          {{ user_subject.number  }}
          <i class='fa fa-flask'></i>
        </p>
        <div class='card-head tiny'>
          <h5 style='color:white;'>{{ subject.name }}</h5>
        </div>
      </div>
    </div>
  </a>
</div>
{% endmacro -%}


{% macro render_report_modal(user) -%}
<div id="report_modal_{{ user.id }}" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <a href='user={{ user.code }}' style='color:black;'>
          <h5>Report {{ user.name }}:</h5>
        </a>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form action="{{ url_for('user.report_user', user_id=user.id) }}" method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        <div class="modal-body">
            <p>
              TheProjectProject is intended to be a safe, welcoming place full of innovation
              and passion. We take violations of our community guidelines very seriously,
              and thank you for reporting this potential infraction. Please tell us
              what happened:
            </p>
            <br>
            <input type='text' name='report_text' id='report_text' maxlength=250 class='join-input' required/>
            <small><center>Limit: 250 characters</center></small>
            <br>
            <p>
              This report is totally anonymous: {{ user.name }} will not
              be given any information without your permission. If necessary, we
              we may want to follow up with you as we investigate.
            </p>
        </div>
        <div class="modal-footer">
          <button class='btn'>Submit Report</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endmacro -%}
