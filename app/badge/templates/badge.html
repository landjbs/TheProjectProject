{% extends "home_base.html" %}
{% import "badge_macros.html" as badge_macros %}

{% block title %}Perks{% endblock %}

{% block head %}
  {{ super() }}
  <link type="text/css" href="css/scroll_styles.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block content %}
<div class='container my-2' style='min-width: 90%'>
  {% if progress_tabs!=[] %}
    <h4 style='text-align:left;'>In Progress</h4>
    <hr class="my-2">
    <div id="progress-carousel" class="carousel slide carousel-multi-item" data-ride="carousel">
      <!--Slides-->
      <div class="carousel-inner" role="listbox">
        {% for tab in progress_tabs %}
          {% if loop.index==1 %}
          <div class="carousel-item active">
          {% else %}
          <div class="carousel-item">
          {% endif %}
            <div class='row'>
              {% for user_badge in tab %}
                {{ badge_macros.render_user_badge_card(user_badge) }}
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </div>
      <!--Controls-->
      <div class="controls-top">
        <a class="btn-floating" href="#progress-carousel" data-slide="prev"><i class="fa fa-chevron-circle-left fa-lg"></i></a>
        <p id='project-count' class='counter'>0</p>
        <a class="btn-floating" href="#progress-carousel" data-slide="next"><i class="fa fa-chevron-circle-right fa-lg"></i></a>
      </div>
      <!--/.Controls-->
    </div>
  {% endif %}

  {% if all_tabs!=[] %}
      <div id="all-carousel" class="carousel slide carousel-multi-item" data-ride="carousel">
      <h4 style='text-align:left;'>All Badges</h4>
      <hr class="my-2">
      <div class="carousel-inner" role="listbox">
        {% for tab in all_tabs %}
          {% if loop.index==1 %}
          <div class="carousel-item active">
          {% else %}
          <div class="carousel-item">
          {% endif %}
            <div class='row'>
              {% for badge in tab %}
                {{ badge.name }}
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    <!--Controls-->
    <div class="controls-top">
      <a class="btn-floating" href="#all-carousel" data-slide="prev"><i class="fa fa-chevron-circle-left fa-lg"></i></a>
      <p id='all-count' class='counter'>0</p>
      <a class="btn-floating" href="#all-carousel" data-slide="next"><i class="fa fa-chevron-circle-right fa-lg"></i></a>
    </div>
    <!--/.Controls-->
  {% endif %}


<script>
// log tabs
$('#progress-carousel').on('slid.bs.carousel', function () {
  var cur = $('#progress-carousel div.active').index();
  sessionStorage.setItem('recSlide', cur);
  $('#progress-count').html(cur);
  });

$('#all-carousel').on('slid.bs.carousel', function () {
  var cur = $('#all-carousel div.active').index();
  sessionStorage.setItem('trendingSlide', cur);
  $('#all-count').html(cur);
  });

// rescroll carousels doesnt do it rn because no need // WARNING: may want to later
</script>


{% endblock %}
