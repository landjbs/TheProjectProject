{% from 'macros/carousels.html' import render_carousel with context %}
{% from 'macros/listbox.html' import render_listbox with context %}
{% from 'macros/cards/badge.html' import render_badge_icon_bigger %}
{% from 'macros/cards/user.html' import render_user_action_bar, render_edit_user_modal, render_delete_account_modal %}

{% extends "home_base.html" %}


{% block title %}{{ company.name }}{% endblock %}

{% block head %}
  {{ super() }}
  <meta name="description" content='{{ company.name }} on TheProjectProject. Oneliner: "{{ company.oneliner }}".'>
  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <!-- Our Custom CSS -->
  <link rel="stylesheet" href="/css/scroll_styles.css">
  <link rel="stylesheet" href="/css/project_styles.css">
  <link rel='stylesheet' href="/css/badge_styles.css">
{% endblock %}

{% block content %}
<div class="wrapper">
    <!-- Sidebar Holder -->
    <nav id="sidebar">
        <div class="sidebar-header">
            <p class='float-right' style='text-align: right;'>
              <span id='projectcount_{{ company.id }}'>
                <i class="fa fa-circle"></i>
              </span>
            </p>
            <a href="{{ url_for('company.company_page', company_code=company.code) }}">
              <h3>
                {{ company.name }}
              </h3>
            </a>
        </div>
        <!-- TODO: actionbar -->
        <br>
        <ul class="list-unstyled components">
          <div class='bio'>
            <p>
              {{ company.oneliner }}
            </p>
            <p>{{ company.summary }}</p>
            <p>
              {% if company.competition %}
                {% set competition = company.competition.competition %}
                <i class='fa fa-trophy' style='color: gold;'></i>
                <a class='user-name' href='{{ competition.get_url() }}'>
                  {{ competition.name }}
                  &nbsp;
                  <i class='fa fa-clock-o'></i>
                  {% set total_length = competition.total_length() %}
                  {% set time_progressed = smallest(total_length, competition.time_progressed()) %}
                  {{ time_progressed }} / {{ total_length }} days
                </a>
              {% endif %}
            </p>
            <center>
              {% if not project.complete %}
                {% set elapsed = project.elasped() %}
                {% set est = project.estimated_time_safe() %}
                {% set elapsed_style = elapsed_style(elapsed, est) %}
                <p style="margin:0px;">Progress: {{ elapsed }}/{{ est }} days</p>
                <div class="progress" style='width:80%;'>
                  <div class="progress-bar" role="progressbar"
                      style='{{ elapsed_style }}'
                      aria-valuenow="{{ elapsed }}" aria-valuemin="0"
                      aria-valuemax="{{ est }}"></div>
                </div>
              {% else %}
                <p style="margin:0px;">Project Complete!</p>
                <div class="progress" style='width:80%;'>
                  <div class="progress-bar" role="progressbar"
                      style='width: 100%;'/>
                </div>
              {% endif %}
            </center>
            <br>
          </div>
        </ul>
    </nav>
  </div>
{% endblock %}
