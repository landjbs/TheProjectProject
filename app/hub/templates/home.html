{% extends "home_base.html" %}
{% block title %}Home{% endblock %}

{% block head %}
  {{ super() }}
  <link type="text/css" href="css/scroll_styles.css" rel="stylesheet">
  <link rel='stylesheet' href="css/badge_styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block content %}
<div class='container my-1' style='min-width: 90%'>
  <!-- recommendations -->
  {{
    render_carousel(
      label='Recommended Projects',
      id_postfix='recommended',
      card_type='project-big',
      data=recommended,
      interval=5000)
  }}
  <!-- trending -->
  {% if trending %}
    {{
      render_carousel(
        label='Trending Projects',
        id_postfix='trending',
        card_type='project-big',
        data=trending)
    }}
  {% endif %}
  <!-- owned -->
  {% if my %}
    {{
      render_carousel(
        label='My Projects',
        id_postfix='my',
        card_type='project-big',
        data=trending)
    }}
  {% endif %}


  <h4 style='text-align:left;'>My Projects</h4>
  <hr class="my-1">
  {% if user_project_count>0 %}
    <div id="my-carousel" class="carousel slide carousel-multi-item" data-ride="carousel">
      <!--Slides-->
      <div class="carousel-inner" role="listbox">
        {% for tab in user_tabs %}
          {% if loop.index==1 %}
          <div class="carousel-item active">
          {% else %}
          <div class="carousel-item">
          {% endif %}
            <div class='row'>
              {% for project in tab %}
                {{ macros.render_small_project_card(current_user, project, now, calc_days_since) }}
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    {% if (user_tabs|length > 1) and not request.MOBILE %}
      <!--Controls-->
      <div class="controls-top">
        <a class="btn-floating" href="#my-carousel" data-slide="prev"><i class="fa fa-chevron-circle-left fa-lg"></i></a>
        <p id='my-count' class='counter'>0</p>
        <a class="btn-floating" href="#my-carousel" data-slide="next"><i class="fa fa-chevron-circle-right fa-lg"></i></a>
      </div>
      <!--/.Controls-->
    {% else %}
      <br>
    {% endif %}
  {% else %}
  <div style='text-align:center;'>
    <a type="button" href="/add_project">
      <i class="fa fa-plus-circle fa-3x add_button" aria-hidden="true"></i>
    </a>
  </div>
  {% endif %}
</div>



<div>
  {% for tab in recommended_tabs %}
    {% for project in tab %}
      {{ macros.render_join_modal(current_user, project, project_application) }}
    {% endfor %}
  {% endfor %}
</div>

{% endblock %}
